#include <iostream>
#include <vector>
#include <string>
#include <iterator>
#include <fstream>
#include <sstream>
#include <algorithm>
#include <climits>
#include <cassert>
#include <cstdlib>


extern "C"
int* get_vector(char* filename)
{


  std::vector<int> sched;
  std::string line;
  std::ifstream input(filename);

  if(input) {
    getline(input, line);
  } else {
    //std::cout << "Failed to open file" << std::endl;
    return NULL;
  }
  
  //std::cout << "I got " <<  line << std::endl;
  std::replace(line.begin(), line.end(), ',', ' ');

  std::istringstream iss(line);

  int conversion_result;
  
  while (iss >> conversion_result)
    {
      sched.push_back(conversion_result);
      // std::cout << conversion_result << std::endl;
    }

  /*
  std::cout << "Vector is: ";
  for(unsigned int i = 0; i < sched.size(); ++i) {
    std::cout << sched[i] << " ";
    } 
  std::cout << std::endl;
  */
  sched.push_back(INT_MAX);
  
  //std::cout << sched[0] << std::endl;

  int *ret;
  ret = static_cast<int*> (std::malloc(sched.size() * sizeof(int)));

  for(unsigned int i = 0; i < sched.size(); ++i) {
    ret[i] = sched[i];
  }

  return ret;
 
}
